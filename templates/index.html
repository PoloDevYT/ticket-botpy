{% extends "layout.html" %}

{% block content %}
<div class="hero">
    <h1>Gerencie seus Tickets<br><span style="color: var(--primary-color);">Como um Profissional</span></h1>
    <p>Painel de administração completo para o seu bot de tickets do Discord.</p>

    {% if not session.get('user') %}
    <a href="/login" class="btn btn-primary" style="font-size: 1.2rem; padding: 1rem 2rem;">
        <i class="fa-brands fa-discord"></i> Começar Agora
    </a>
    {% else %}
    <div class="grid">
        {% for guild in guilds %}
        <div class="card glass-panel">
            <div class="card-header">
                {% if guild.icon %}
                <img src="https://cdn.discordapp.com/icons/{{ guild.id }}/{{ guild.icon }}.png" class="server-icon"
                    alt="{{ guild.name }}">
                {% else %}
                <div class="server-icon">{{ guild.name[0] }}</div>
                {% endif %}
                <div>
                    <h3>{{ guild.name }}</h3>
                    <p class="stat-label">ID: {{ guild.id }}</p>
                </div>
            </div>
            {% if guild.has_bot %}
            <a href="/server/{{ guild.id }}" class="btn btn-primary" style="width: 100%; justify-content: center;">
                <i class="fa-solid fa-gear"></i> Gerenciar
            </a>
            {% else %}
            <a href="https://discord.com/api/oauth2/authorize?client_id={{ client_id }}&permissions=8&scope=bot%20applications.commands&guild_id={{ guild.id }}&disable_guild_select=true"
                class="btn"
                style="width: 100%; justify-content: center; background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid var(--glass-border);"
                target="_blank">
                <i class="fa-solid fa-plus"></i> Adicionar Bot
            </a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}